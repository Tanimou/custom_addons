<?xml version="1.0" encoding="UTF-8"?>

<templates xml:space="preserve">

    <t t-name="custom_pos.PaymentScreenDue"
       t-inherit="point_of_sale.PaymentScreenDue"
       t-inherit-mode="extension">

        <xpath expr="//section[hasclass('paymentlines-container')]" position="after">
            <t t-if="pos.getOrder()?.getPartner() and pos.getOrder()?.getLoyaltyPoints()">
                <t t-foreach="pos.getOrder()?.getLoyaltyPoints() or []" t-as="_loyaltyStat" t-key="_loyaltyStat.couponId">
                    <section class="paymentlines-container rounded-3 bg-view mt-2">
                        <div class="total text-center py-2 py-lg-4">
                            Solde: Point de fidelite
                            <div class="text-warning fw-bold fs-3">
                                <t t-esc="_loyaltyStat.points.balance"/>
                            </div>
                        </div>
                    </section>
                </t>
            </t>
        </xpath>
    </t>



    <!-- Insert Preset Remise Buttons into Actionpad (Product Screen) -->
    <t t-inherit="point_of_sale.ActionpadWidget" t-inherit-mode="extension">
        <xpath expr="//div[hasclass('d-flex gap-2')]" position="before">
            <div t-if="this.getPresetRemiseList and this.getPresetRemiseList().length > 0"
                 class="d-flex flex-row flex-wrap gap-1 w-100 mt-2 mb-2 preset-remise-buttons-container">
                <t t-foreach="this.getPresetRemiseList()" t-as="percentage" t-key="percentage">
                    <button class="button preset-remise-button btn btn-info btn-lg flex-grow-1 text-wrap lh-lg"
                            t-on-click="() => this.applyPresetRemise(percentage)"
                            t-attf-title="Apply {{ percentage }}% remise to selected product">
                        <i class="fa fa-percent me-1" role="img" />
                        <span t-esc="percentage"/>
                    </button>
                </t>
            </div>
        </xpath>
    </t>

</templates>
