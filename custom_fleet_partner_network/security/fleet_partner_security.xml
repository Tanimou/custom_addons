<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data noupdate="0">
        <!-- ================================================================= -->
        <!-- PHASE 1-2: Partner Profile and Contract Rules                     -->
        <!-- ================================================================= -->
        
        <!-- Isolement multi-société pour les profils partenaires -->
        <record id="fleet_partner_profile_company_rule" model="ir.rule">
            <field name="name">Fleet Partner Profile: Multi-company</field>
            <field name="model_id" ref="model_fleet_partner_profile"/>
            <field name="domain_force">[("company_id", "in", company_ids)]</field>
            <field name="groups" eval="[(4, ref('custom_fleet_partner_network.group_fleet_partner_user')), (4, ref('custom_fleet_partner_network.group_fleet_partner_manager'))]"/>
        </record>

        <!-- Isolement multi-société pour les contrats partenaires -->
        <record id="fleet_partner_contract_company_rule" model="ir.rule">
            <field name="name">Fleet Partner Contract: Multi-company</field>
            <field name="model_id" ref="model_fleet_partner_contract"/>
            <field name="domain_force">[("company_id", "in", company_ids)]</field>
            <field name="groups" eval="[(4, ref('custom_fleet_partner_network.group_fleet_partner_user')), (4, ref('custom_fleet_partner_network.group_fleet_partner_manager'))]"/>
        </record>

        <!-- ================================================================= -->
        <!-- PHASE 3: Incident Ticket Rules                                    -->
        <!-- ================================================================= -->
        
        <!-- Isolement multi-société pour les tickets d'incident -->
        <record id="fleet_incident_ticket_company_rule" model="ir.rule">
            <field name="name">Fleet Incident Ticket: Multi-company</field>
            <field name="model_id" ref="model_fleet_incident_ticket"/>
            <field name="domain_force">[("company_id", "in", company_ids)]</field>
            <field name="groups" eval="[(4, ref('custom_fleet_partner_network.group_fleet_partner_user')), (4, ref('custom_fleet_partner_network.group_fleet_partner_manager'))]"/>
        </record>
    </data>
</odoo>
