<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        
        <!-- ========== ACTIONS (must be defined before menuitems) ========== -->
        
        <!-- Action: Véhicules Disponibles -->
        <record id="action_fleet_vehicle_available" model="ir.actions.act_window">
            <field name="name">Véhicules Disponibles</field>
            <field name="res_model">fleet.vehicle</field>
            <field name="view_mode">kanban,list,form</field>
            <field name="domain">[('is_available', '=', True)]</field>
            <field name="context">{}</field>
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
                    Aucun véhicule disponible
                </p>
                <p>
                    Les véhicules disponibles sont ceux qui:
                    <ul>
                        <li>Sont actifs</li>
                        <li>Ne sont pas en maintenance</li>
                        <li>N'ont pas de mission en cours</li>
                    </ul>
                </p>
            </field>
        </record>
        
        <!-- Action: Missions (will be defined in fleet_mission_views.xml) -->
        <record id="action_fleet_mission" model="ir.actions.act_window">
            <field name="name">Missions Véhicules</field>
            <field name="res_model">fleet.mission</field>
            <field name="view_mode">kanban,list,form,calendar,gantt,pivot,graph</field>
            <field name="context">{}</field>
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
                    Aucune mission créée
                </p>
                <p>
                    Créez votre première mission pour planifier l'utilisation d'un véhicule.
                </p>
            </field>
        </record>
        
        <!-- Action: Mes Missions -->
        <record id="action_fleet_mission_my" model="ir.actions.act_window">
            <field name="name">Mes Missions</field>
            <field name="res_model">fleet.mission</field>
            <field name="view_mode">list,form,calendar</field>
            <field name="domain">[('requester_id', '=', uid)]</field>
            <field name="context">{'default_requester_id': uid}</field>
        </record>
        
        <!-- Action: Missions À Approuver -->
        <record id="action_fleet_mission_pending" model="ir.actions.act_window">
            <field name="name">Missions À Approuver</field>
            <field name="res_model">fleet.mission</field>
            <field name="view_mode">list,form</field>
            <field name="domain">[('state', '=', 'submitted')]</field>
            <field name="context">{'search_default_submitted': 1}</field>
        </record>
        
        <!-- Action: Documents (will be defined in fleet_document_views.xml) -->
        <record id="action_fleet_document" model="ir.actions.act_window">
            <field name="name">Documents Véhicules</field>
            <field name="res_model">fleet.vehicle.document</field>
            <field name="view_mode">list,form</field>
            <field name="context">{}</field>
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
                    Aucun document enregistré
                </p>
                <p>
                    Ajoutez des documents administratifs pour suivre leurs échéances.
                </p>
            </field>
        </record>
        
        <!-- Action: Documents Échéances J-30 -->
        <record id="action_fleet_document_expiring" model="ir.actions.act_window">
            <field name="name">Documents Expire Bientôt (J-30)</field>
            <field name="res_model">fleet.vehicle.document</field>
            <field name="view_mode">list,form</field>
            <field name="domain">[('state', 'in', ['expiring_soon', 'expired'])]</field>
            <field name="context">{'search_default_expiring_soon': 1}</field>
        </record>
        
        <!-- Action: Dashboard (will be defined in fleet_dashboard.xml) -->
        <!-- Disabled: board.board structure changed in Odoo 19 - needs rebuild -->
        <!--
        <record id="action_fleet_dashboard" model="ir.actions.act_window">
            <field name="name">Tableau de Bord Parc Auto</field>
            <field name="res_model">board.board</field>
            <field name="view_mode">form</field>
            <field name="usage">menu</field>
        </record>
        -->
        
        <!-- ========== MAIN MENU ========== -->
        
        <!-- Root Menu: Parc Automobile (extends native Fleet menu) -->
        <menuitem id="fleet.menu_root"
                  name="Parc Automobile"
                  sequence="85"
                  web_icon="fleet,static/description/icon.png"
                  groups="group_fleet_user"/>
        
        <!-- Section: Véhicules -->
        <menuitem id="menu_fleet_vehicles"
                  name="Véhicules"
                  parent="fleet.menu_root"
                  sequence="10"
                  groups="group_fleet_user"/>
        
        <menuitem id="menu_fleet_vehicle_list"
                  name="Tous les Véhicules"
                  parent="menu_fleet_vehicles"
                  action="fleet.fleet_vehicle_action"
                  sequence="10"
                  groups="group_fleet_user"/>
        
        <menuitem id="menu_fleet_vehicle_available"
                  name="Véhicules Disponibles"
                  parent="menu_fleet_vehicles"
                  action="action_fleet_vehicle_available"
                  sequence="20"
                  groups="group_fleet_user"/>
        
        <!-- Section: Missions -->
        <menuitem id="menu_fleet_missions"
                  name="Missions"
                  parent="fleet.menu_root"
                  sequence="20"
                  groups="group_fleet_user"/>
        
        <menuitem id="menu_fleet_mission_list"
                  name="Toutes les Missions"
                  parent="menu_fleet_missions"
                  action="action_fleet_mission"
                  sequence="10"
                  groups="group_fleet_user"/>
        
        <menuitem id="menu_fleet_mission_my"
                  name="Mes Missions"
                  parent="menu_fleet_missions"
                  action="action_fleet_mission_my"
                  sequence="20"
                  groups="group_fleet_user"/>
        
        <menuitem id="menu_fleet_mission_pending"
                  name="À Approuver"
                  parent="menu_fleet_missions"
                  action="action_fleet_mission_pending"
                  sequence="30"
                  groups="group_fleet_manager"/>
        
        <!-- Section: Documents -->
        <menuitem id="menu_fleet_documents"
                  name="Documents"
                  parent="fleet.menu_root"
                  sequence="30"
                  groups="group_fleet_user"/>
        
        <menuitem id="menu_fleet_document_list"
                  name="Tous les Documents"
                  parent="menu_fleet_documents"
                  action="action_fleet_document"
                  sequence="10"
                  groups="group_fleet_user"/>
        
        <menuitem id="menu_fleet_document_expiring"
                  name="Échéances J-30"
                  parent="menu_fleet_documents"
                  action="action_fleet_document_expiring"
                  sequence="20"
                  groups="group_fleet_user"/>
        
        <!-- Section: Tableau de Bord -->
        <!-- Disabled: board.board structure changed in Odoo 19 - needs rebuild -->
        <!--
        <menuitem id="menu_fleet_dashboard"
                  name="Tableau de Bord"
                  parent="fleet.menu_root"
                  action="action_fleet_dashboard"
                  sequence="5"
                  groups="group_fleet_manager"/>
        -->
        
        <!-- Configuration section: Use native fleet.fleet_configuration menu -->
        <!-- Native fleet already has Configuration menu with Settings submenu -->
        <!-- Custom settings are merged into native settings via res_config_settings_views.xml -->
        
    </data>
</odoo>
