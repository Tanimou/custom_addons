<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Extend POS settings to add self-order preset configuration -->
    <record id="res_config_settings_view_form_self_order_presets" model="ir.ui.view">
        <field name="name">res.config.settings.view.form.inherit.custom_la_duree_palisades.self_order_presets</field>
        <field name="model">res.config.settings</field>
        <field name="inherit_id" ref="pos_self_order.res_config_settings_view_form_menu"/>
        <field name="arch" type="xml">
            <!-- Insert self-order preset settings after the Background setting (using field as selector) -->
            <xpath expr="//field[@name='pos_self_ordering_image_background_ids']/parent::setting" position="after">
                <setting 
                    string="Sur place / Livraison / Membres (Self-Order)" 
                    help="Define presets for self-order interface to manage taxes &amp; prices for dine in, take out, members..."
                    invisible="pos_self_ordering_mode == 'nothing'"
                >
                    <field name="pos_self_order_use_presets"/>
                    <div class="content-group" invisible="not pos_self_order_use_presets">
                        <div class="row">
                            <label for="pos_self_order_available_preset_ids" class="col-lg-3" string="Available"/>
                            <field 
                                name="pos_self_order_available_preset_ids" 
                                widget="many2many_tags" 
                                options="{'no_quick_create': True, 'color_field': 'color'}"
                                domain="[('available_in_self', '=', True)]"
                            />
                        </div>
                        <div class="row">
                            <label for="pos_self_order_default_preset_id" class="col-lg-3" string="Default"/>
                            <field 
                                name="pos_self_order_default_preset_id"
                                options="{'no_create': True}"
                                required="pos_self_order_use_presets"
                                domain="[('id', 'in', pos_self_order_available_preset_ids)]"
                            />
                        </div>
                        <div>
                            <button 
                                name="%(point_of_sale.action_pos_preset_form)d" 
                                icon="oi-arrow-right" 
                                type="action" 
                                string="Configure Presets" 
                                class="btn-link"
                            />
                        </div>
                    </div>
                </setting>
            </xpath>
        </field>
    </record>
</odoo>
