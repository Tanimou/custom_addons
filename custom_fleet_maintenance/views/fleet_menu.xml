<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <!-- Override native Fleet Services menu to point to Maintenance Interventions -->
    <record id="fleet.fleet_vehicle_log_services_menu" model="ir.ui.menu">
        <field name="name">Services</field>
        <field name="parent_id" ref="fleet.fleet_vehicles"/>
        <field name="action" ref="custom_fleet_maintenance.fleet_maintenance_intervention_action"/>
        <field name="sequence">3</field>
        <field name="group_ids" eval="[(6, 0, [ref('custom_fleet_maintenance.group_fleet_maintenance_user')])]"/>
    </record>

    <menuitem id="menu_fleet_maintenance_root"
              name="Maintenance"
              parent="fleet.menu_root"
              sequence="40"
              groups="custom_fleet_maintenance.group_fleet_maintenance_user"/>

    <menuitem id="menu_fleet_maintenance_dashboard"
              name="Tableau de bord"
              parent="menu_fleet_maintenance_root"
              action="custom_fleet_maintenance.action_fleet_dashboard"
              sequence="1"
              groups="custom_fleet_maintenance.group_fleet_maintenance_user"/>

    <menuitem id="menu_fleet_maintenance_plans"
              name="Plans prÃ©ventifs"
              parent="menu_fleet_maintenance_root"
              action="custom_fleet_maintenance.fleet_maintenance_plan_action"
              sequence="5"
              groups="custom_fleet_maintenance.group_fleet_maintenance_user"/>

    <menuitem id="menu_fleet_maintenance_driver_request"
              name="Declarer une panne"
              parent="menu_fleet_maintenance_root"
              action="custom_fleet_maintenance.action_fleet_maintenance_request_wizard"
              sequence="15"
              groups="custom_fleet_maintenance.group_fleet_maintenance_driver"/>

    <menuitem id="menu_fleet_maintenance_driver_interventions"
              name="Mes interventions"
              parent="menu_fleet_maintenance_root"
              action="custom_fleet_maintenance.fleet_maintenance_intervention_action"
              sequence="16"
              groups="custom_fleet_maintenance.group_fleet_maintenance_driver"/>


    <record id="fleet_maintenance_config_action" model="ir.actions.act_window">
        <field name="name">Configuration maintenance flotte</field>
        <field name="res_model">res.config.settings</field>
        <field name="view_mode">form</field>
        <field name="target">new</field>
        <field name="context">{'module': 'custom_fleet_maintenance'}</field>
    </record>

</odoo>
